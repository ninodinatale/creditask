query detailTask($taskGroupId: ID!) {
    task(taskGroupId: $taskGroupId) {
        ...detailTask
    }
}

mutation updateTask($task: TaskInputUpdate!) {
    saveTask(updateInput: $task) {
        task {
            ...detailTask
        }
    }
}

mutation updateApproval($approval: ApprovalInput!) {
    saveApproval(input: $approval) {
        approval {
            state
        }
    }
}

fragment detailTask on TaskType {
    id
    taskGroup {
        id
    }
    factor
    name
    neededTimeSeconds
    periodStart
    periodEnd
    state
    user {
        publicName
        id
    }
    changes {
        ...taskChanges
    },
    approvals {
        state
        user {
            id
            publicName
        }
    }
}

fragment taskChanges on TaskChangeType {
    changedProperty
    currentValue
    previousValue
    timestamp
    user {
        publicName
    }
}
